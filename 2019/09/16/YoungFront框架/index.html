<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="符佳凤的博客">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        YoungFront 框架 - FU的博客 | FU&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Fashion passes ,   style remains. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Jiafeng Fu</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#YFjs-组件库"><span class="toc-text">YFjs 组件库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#引入组件库"><span class="toc-text">引入组件库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#入口配置"><span class="toc-text">入口配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#yfjs-spa-框架"><span class="toc-text">yfjs/spa 框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#配置应用入口"><span class="toc-text">配置应用入口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#构建应用目录"><span class="toc-text">构建应用目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#编写首页内容"><span class="toc-text">编写首页内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用布局"><span class="toc-text">使用布局</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#约定与配置"><span class="toc-text">约定与配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#应用层"><span class="toc-text">应用层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#视图-布局层"><span class="toc-text">视图/布局层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#实例的生命周期"><span class="toc-text">实例的生命周期</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Fashion passes ,   style remains. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        YoungFront 框架
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2019-09-16 21:04:28</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#JavaScript" title="JavaScript">JavaScript</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#YoungFront" title="YoungFront">YoungFront</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="YFjs-组件库"><a href="#YFjs-组件库" class="headerlink" title="YFjs 组件库"></a>YFjs 组件库</h2><p>一个基于 AMD规范 的组件库，内含简洁 SPA 框架，便于快速构建单页面应用系统。<br>&emsp;&emsp;其中大部分是第三方库，如 jQuery、RequireJs、Bootstrap 等的开源库和框架是这个组件库的核心依赖。<br>&emsp;&emsp;YFjs不仅能够帮助我们快速使用弹出框、美化后的下拉框和单/复选框、滚动条等UI组件，也能使用JSON转换、Cookie处理、日期格式处理等工具插件，更能配合内含的 SPA 框架快速构建一个单页面应用系统，让我们的前端开发更便捷。</p>
<img src="/2019/09/16/YoungFront框架/yfjs-content.png" title="yfjs目录结构">
<h3 id="引入组件库"><a href="#引入组件库" class="headerlink" title="引入组件库"></a>引入组件库</h3><p>在 head 标签内引入组件库的入口 JS 文件 yfjs.js 即可：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"[yfjs-lib path]/yfjs.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>入口 JS 文件会 <strong>自动引入</strong> 基本样式文件、核心 JS 库文件等组件库的相关静态资源。</p>
<h3 id="入口配置"><a href="#入口配置" class="headerlink" title="入口配置"></a>入口配置</h3><p>在引入组件库的入口 JS 文件时，我们可以通过定义以下属性来扩展组件库的功能。</p>
<ul>
<li><strong>data-cache</strong>: 全局缓存开关，默认为 true。设为 false 则关闭缓存</li>
<li><strong>data-debug</strong>: 调试模式开关，默认为 false，使用压缩后的资源。设为 true 时将使用未压缩的资源</li>
<li><strong>data-debug-css</strong>: 基本样式文件的调试模式开关，默认为 data-debug。为 false 时引入压缩后的基本样式文件，否则引入未压缩的基本样式文件</li>
<li><strong>data-debug-module</strong>: 组件模块的调试模式开关，默认为 data-debug。为 false 时引入压缩后的组件模块文件，否则引入未压缩的组件模块文件</li>
<li><strong>data-base</strong>: 应用访问基路径，默认继承 <base> 标签值。</li>
<li><strong>data-base-require</strong>: 应用内自定义模块引入基路径，默认相对于 data-base。</li>
<li><strong>data-base-css</strong>: 是否引入组件库的基本样式文件，默认为 true。设为 false 时不引入基本样式文件。</li>
<li><strong>data-compatible</strong>: 是否引入所有兼容脚本，默认为 false。设为 true 时自动判断兼容性并引入兼容脚本。</li>
<li><strong>data-compatible-modernizr</strong>: 是否引入 Modernizr 兼容脚本，默认为 data-compatible。了解 Modernizr。</li>
<li><strong>data-compatible-respond</strong>: 是否引入 respond 兼容脚本（兼容 Media Query），默认为 data-compatible。</li>
<li><strong>data-compatible-html5</strong>: 是否引入 html5shiv 兼容脚本（兼容 HTML5 新元素），默认为 data-compatible。</li>
<li><strong>data-compatible-es5</strong>: 是否引入 es5 兼容脚本（兼容 ES5 API），默认为 data-compatible。</li>
<li><strong>data-compatible-es6</strong>: 是否引入 es6 兼容脚本（兼容 ES6 API），默认为 data-compatible。</li>
<li><strong>data-compatible-json</strong>: 是否引入 JSON 兼容脚本（兼容 JSON.parse 和 JSON.stringify），默认为 data-compatible。</li>
<li><strong>data-main</strong>: 应用入口 JS 文件。</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"[yfjs-lib path]/yfjs.js?v=0.8.2"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">data-cache</span>=<span class="string">"false"</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">data-debug</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="yfjs-spa-框架"><a href="#yfjs-spa-框架" class="headerlink" title="yfjs/spa 框架"></a>yfjs/spa 框架</h2><p>一个 SPA（单页面应用）框架，风格简洁，配置和约定共同驱动。</p>
<h3 id="配置应用入口"><a href="#配置应用入口" class="headerlink" title="配置应用入口"></a>配置应用入口</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/yfjs-lib/yfjs.js"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">data-main</span>=<span class="string">"app"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">data-base-require</span>=<span class="string">"app"</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">data-cache</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>data-main</strong>: 应用的入口 JS 文件。建议为 app。</li>
<li><strong>data-base-require</strong>: 引入本地资源的基路径。建议为 app。</li>
<li><strong>data-cache</strong>: 全局缓存开关，控制模板文件、JS 文件等是否缓存。默认开启缓存，设置为 false 则关闭缓存。 </li>
</ul>
<h3 id="构建应用目录"><a href="#构建应用目录" class="headerlink" title="构建应用目录"></a>构建应用目录</h3><img src="/2019/09/16/YoungFront框架/content-structure.png" title="构建应用目录">
<h3 id="编写首页内容"><a href="#编写首页内容" class="headerlink" title="编写首页内容"></a>编写首页内容</h3><p>编写应用入口文件内容，引入框架 yfjs/spa ：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'yfjs/spa'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">SPA</span>) </span>&#123; </span><br><span class="line">    SPA.create(); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在视图目录下创建文件 home.js，并编写内容：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'App'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">App</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> App.View(&#123;</span><br><span class="line">        layout: <span class="string">"default"</span></span><br><span class="line">    &#125;); </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在视图模板目录下创建文件 home.html，并编写内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span> </span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在布局目录下创建布局文件 default.js，并编写内容：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">define([<span class="string">'App'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> App.Layout();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在布局模板目录下创建文件 default.html，并编写内容：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span> </span><br><span class="line">    &#123;&#123;&#123;body&#125;&#125;&#125; </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<h3 id="使用布局"><a href="#使用布局" class="headerlink" title="使用布局"></a>使用布局</h3><p>将<strong>页面的公共部分</strong>抽离成布局，提升页面的渲染效率。</p>
<h3 id="约定与配置"><a href="#约定与配置" class="headerlink" title="约定与配置"></a>约定与配置</h3><p>yfjs/spa 框架是一个 <u><strong>配置和约定共同驱动</strong></u> 的框架。配置的是<strong>功能接口</strong>，约定的是<strong>路由等规则</strong>。</p>
<p><strong>约定规则 — 路由约定</strong></p>
<p>框架内置了页面路由，页面的定向遵守框架既定规则：</p>
<ul>
<li>页面的路由在 URL 上默认体现为 hash 模式。即形如 <a href="http://127.0.0.1/#/path?param1=value1，则页面路径为" target="_blank" rel="noopener">http://127.0.0.1/#/path?param1=value1，则页面路径为</a>“ /path “，其后内容为页面的参数。</li>
<li>页面路径对应视图目录 views下的同路径同名的 JavaScript 文件。</li>
<li>页面的默认模板对应模板目录 templates下的同路径同名的 HTML 文件。</li>
<li>页面使用的布局（若存在）对应布局目录 layouts下的同路径同名的 JavaScript 文件。</li>
<li>页面布局的默认模板对应布局模板目录 templates/layouts下的同路径同名的 HTML 文件。</li>
</ul>
<p><strong>约定规则 — 分层渲染</strong></p>
<p>为了充分体现单页面应用的局部加载、按需加载的特性，框架将页面内容进行了区段划分，并由上至下分层渲染。<br>&emsp;&emsp;框架将当前页面窗口定义为 App 层（应用层），页面主体内容定义为 View 层（视图层），页面外层布局定义为 Layout 层（布局层）。其中 View 层可任意嵌套并定义加载时机，在最上层的 View 层可指定采用的 Layout 层。App 层则负责整体状态切换、页面路由等。</p>
<img src="/2019/09/16/YoungFront框架/spa-widgets.png" title="yfjs/spa分层渲染">
<p><strong>配置和扩展</strong></p>
<p>在应用入口文件 /app/app.js 中，为当前应用指定一些配置项：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SPA.create(&#123; </span><br><span class="line">    <span class="comment">// 配置项 baseUrl </span></span><br><span class="line">    baseUrl: &#123; </span><br><span class="line">        style: <span class="string">"/assets/css"</span>,    <span class="comment">// 设置样式文件基路径</span></span><br><span class="line">        resource: <span class="string">"/assets"</span>    <span class="comment">// 设置其他资源基路径</span></span><br><span class="line">     &#125;, </span><br><span class="line">    <span class="comment">// 扩展功能 </span></span><br><span class="line">    doSomething: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"do "</span> + <span class="keyword">this</span>.getSomething(); </span><br><span class="line">     &#125;, </span><br><span class="line">    getSomething: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">return</span> <span class="string">"something."</span>; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>在创建一个视图实例 /views/home.js 时，配置扩展功能如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">App.View(&#123;</span><br><span class="line">    <span class="comment">// 配置项 layout 布局</span></span><br><span class="line">    layout: <span class="string">"default"</span>,</span><br><span class="line">    <span class="comment">// 配置项 ready 页面渲染后执行</span></span><br><span class="line">    ready: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(</span><br><span class="line">            <span class="keyword">this</span>.doSomething()</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 扩展功能</span></span><br><span class="line">    doSomething: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 调用 App 实例的扩展功能</span></span><br><span class="line">        App.doSomething();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<h3 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h3><p>框架结构的顶层。<br>&emsp;&emsp;应用层主要负责路由自动切换、维护全局状态、提供全局功能等。应用开始启动后，框架将自动生成一个应用实例来负责应用层的一应事务。</p>
<h3 id="视图-布局层"><a href="#视图-布局层" class="headerlink" title="视图/布局层"></a>视图/布局层</h3><p>在框架下渲染每个页面的层级结构称为视图（View）层。视图层可以定义自己的布局（Layout）层，布局层主要负责实现多个视图层共有的渲染效果（如公用的 header 页头，banner 图，footer 页脚等）。多个视图层可以共用一个布局层。</p>
<h3 id="实例的生命周期"><a href="#实例的生命周期" class="headerlink" title="实例的生命周期"></a>实例的生命周期</h3><p>应用实例从页面开始初次加载时创建，一直存在到页面顶层窗口关闭。期间页面内容的更新由内置的路由器（Router）自动加载视图层进行处理。这个过程称为 <strong>应用实例生命周期</strong>。<br>页面的访问由 url 中的 hash 部分自动触发。应用层会通过内置的页面路由监控这个触发事件，并开始路由页面。每个页面视图脚本从被加载到开始，到自身内容从页面中移除的过程，称为 <strong>视图实例生命周期</strong>。<br>视图页面内容加载完成后，如果定义了布局层，会继续加载布局层内容。布局层脚本从被加载到开始，到布局内容从页面中移除的过程，称为 <strong>布局实例生命周期</strong>。</p>
<blockquote>
<p>更多详细信息，请访问： <a href="http://jinzhk.github.io/yfjs/" target="_blank" rel="noopener">YoungFront 官网</a></p>
</blockquote>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/jiafengfu">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
