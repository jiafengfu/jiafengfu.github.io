<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="符佳凤的博客">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Vue.js Render函数 - FU的博客 | FU&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<link rel="alternate" href="/atom.xml" title="FU's Blog" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Fashion passes ,   style remains. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Jiafeng Fu</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Virtual-DOM"><span class="toc-text">Virtual DOM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Render-函数"><span class="toc-text">Render 函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#createElement-用法"><span class="toc-text">createElement 用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基本参数"><span class="toc-text">基本参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#约束"><span class="toc-text">约束</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-JavaScript-代替模板功能"><span class="toc-text">使用 JavaScript 代替模板功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数化组件"><span class="toc-text">函数化组件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSX"><span class="toc-text">JSX</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Fashion passes ,   style remains. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Vue.js Render函数
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2019-10-20 23:50:58</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#JavaScript" title="JavaScript">JavaScript</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#Vue.js实战" title="Vue.js实战">Vue.js实战</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="Virtual-DOM"><a href="#Virtual-DOM" class="headerlink" title="Virtual DOM"></a>Virtual DOM</h2><p>Virtual DOM 是一个轻量级的 Javascript 对象，在状态发生变化时，Virtual DOM 会进行 Diff 运算，只更新需要被替换的 DOM，而不是重绘。<br>&emsp;&emsp;在Vue.js 2.0 中，Virtual DOM 是通过一种 <strong>VNode 类</strong> 表达的，每个 DOM 元素或组件 都对应一个 VNode 对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> interface VNode &#123;</span><br><span class="line">    tag?: string; <span class="comment">// 当前节点的标签名</span></span><br><span class="line">    data?: VNodeData; <span class="comment">// 当前节点的数据对象</span></span><br><span class="line">    children?: VNode[]; <span class="comment">// 子节点数组</span></span><br><span class="line">    text?: string; <span class="comment">// 当前节点的文本</span></span><br><span class="line">    elm?: Node; <span class="comment">// 当前虚拟节点 对应的真实的 DOM 节点</span></span><br><span class="line">    ns?: string; <span class="comment">// 节点的 namespace</span></span><br><span class="line">    context?: Vue; <span class="comment">// 编译作用域</span></span><br><span class="line">    key?: string | number; <span class="comment">// 节点的标识，有利于 patch 的优化</span></span><br><span class="line">    componentOptions?: VNodeComponentOptions; <span class="comment">// 创建组件实例时，用到的选项信息</span></span><br><span class="line">    componentInstance?: Vue; <span class="comment">//</span></span><br><span class="line">    parent?: VNode; <span class="comment">// 组件的占位节点</span></span><br><span class="line">    raw?: boolean; <span class="comment">// 原始 html</span></span><br><span class="line">    isStatic?: boolean; <span class="comment">// 静态节点的标识</span></span><br><span class="line">    isRootInsert: boolean; <span class="comment">// 是否作为根节点插入</span></span><br><span class="line">    isComment: boolean; <span class="comment">// 是否是 注释节点</span></span><br><span class="line">    isCloned?: boolean; <span class="comment">// 是否是 克隆节点</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> interface VNodeData &#123;</span><br><span class="line">    key?: string | number;</span><br><span class="line">    slot?: string;</span><br><span class="line">    scopedSlots?: &#123; [key: string]: scopedSlot &#125;;</span><br><span class="line">    ref?: string;</span><br><span class="line">    tag?: string;</span><br><span class="line">    staticClass?: string;</span><br><span class="line">    class?: any;</span><br><span class="line">    staticStyle?: &#123; [key: string]: any &#125;;</span><br><span class="line">    style?: <span class="built_in">Object</span>[] | <span class="built_in">Object</span>;</span><br><span class="line">    props?: &#123; [key: string]: any &#125;;</span><br><span class="line">    attrs?: &#123; [key: string]: any &#125;;</span><br><span class="line">    domProps?: &#123; [key: string]: any &#125;;</span><br><span class="line">    hook?: &#123; [key: string]: Funcion &#125;;</span><br><span class="line">    on?: &#123; [key: string]: <span class="built_in">Function</span> | <span class="built_in">Function</span>[] &#125;;</span><br><span class="line">    nativeOn?: &#123; [key: string]: <span class="built_in">Function</span> | <span class="built_in">Function</span>[] &#125;;</span><br><span class="line">    transition?: <span class="built_in">Object</span>;</span><br><span class="line">    show?: boolean;</span><br><span class="line">    inlineTemplate?: &#123;</span><br><span class="line">        render: <span class="built_in">Function</span>;</span><br><span class="line">        staticRenderFns: <span class="built_in">Function</span>[];</span><br><span class="line">    &#125;;</span><br><span class="line">    directives?: VNodeDirective[];</span><br><span class="line">    keepAlive?: boolean;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>VNode 主要可分为如下5类：</p>
<ul>
<li><strong>TextVNode</strong> 文本节点</li>
<li><strong>ElementVNode</strong> 普通元素节点</li>
<li><strong>ComponentVNode</strong> 组件节点</li>
<li><strong>EmptyVNode</strong> 没有内容的注释节点</li>
<li><strong>CloneVNode</strong> 克隆节点（可以为以上任意类型）</li>
</ul>
<p><br><br><br><br><br></p>
<h2 id="Render-函数"><a href="#Render-函数" class="headerlink" title="Render 函数"></a>Render 函数</h2><p>Render 函数通过 <code>createElement</code> 参数来创建 Virtual DOM，有利于精简代码结构。</p>
<p><br><br><br><br><br></p>
<h2 id="createElement-用法"><a href="#createElement-用法" class="headerlink" title="createElement 用法"></a>createElement 用法</h2><h3 id="基本参数"><a href="#基本参数" class="headerlink" title="基本参数"></a>基本参数</h3><p>createElement 构成了 Vue Virtual DOM 的模板，它有 3 个参数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">createElement(</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#123;String | Object | Function&#125; 一个HTML标签 / 组件选项 / 一个函数</span></span><br><span class="line"><span class="comment">     * 必须 Return 上述其中一个</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="string">'div'</span>,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#123;Object&#125; 一个对应属性的数据对象（可选）</span></span><br><span class="line"><span class="comment">     * 可以在 template 中使用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    &#123;&#125;,</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * &#123;String | Array&#125; 子节点（VNode）（可选）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    [</span><br><span class="line">        createElement(<span class="string">'h1'</span>, <span class="string">'hello world'</span>),</span><br><span class="line">        createElement(MyComponent, &#123;</span><br><span class="line">            props: &#123; <span class="attr">someProp</span>: <span class="string">'foo'</span> &#125;</span><br><span class="line">        &#125;),</span><br><span class="line">        <span class="string">'bar'</span></span><br><span class="line">    ]</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>&emsp;&emsp;其中，第 2 个参数 “数据对象” 的具体选项如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="comment">// 和 v-bind: class 一样的API</span></span><br><span class="line">    <span class="string">'class'</span>: &#123;</span><br><span class="line">        foo: <span class="literal">true</span>,</span><br><span class="line">        bar: <span class="literal">false</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 和 v-bind: style 一样的API</span></span><br><span class="line">    style: &#123;</span><br><span class="line">        color: <span class="string">'red'</span>,</span><br><span class="line">        fontSize: <span class="string">'14px'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 正常的 HTML 特性</span></span><br><span class="line">    attrs: &#123;</span><br><span class="line">        id: <span class="string">'foo'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 组件props</span></span><br><span class="line">    props: &#123;</span><br><span class="line">        myProp: <span class="string">'bar'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// DOM 属性</span></span><br><span class="line">    domProps: &#123;</span><br><span class="line">        innerHTML: <span class="string">'baz'</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 自定义事件监听器“on”</span></span><br><span class="line">    <span class="comment">// 不支持如 v-on: keyup.enter 的修饰器</span></span><br><span class="line">    <span class="comment">// 需要手动匹配 keyCode</span></span><br><span class="line">    on: &#123;</span><br><span class="line">        click: <span class="keyword">this</span>.clickHandler</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 仅对于组件，用于监听原生事件</span></span><br><span class="line">    <span class="comment">// 而不是组件使用 vm.$emit 触发的自定义事件]</span></span><br><span class="line">    nativeOn: &#123;</span><br><span class="line">        click: <span class="keyword">this</span>.nativeClickHandler</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 自定义指令</span></span><br><span class="line">    directives: [&#123;</span><br><span class="line">        name: <span class="string">'my-custom-directive'</span>,</span><br><span class="line">        value: <span class="string">'2'</span>,</span><br><span class="line">        expression: <span class="string">'1 + 1'</span>,</span><br><span class="line">        arg: <span class="string">'foo'</span>,</span><br><span class="line">        modifiers: &#123;</span><br><span class="line">            bar: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;],</span><br><span class="line">    <span class="comment">// 作用域 slot</span></span><br><span class="line">    <span class="comment">// &#123;name: props =&gt; VNode | Array&lt;VNode&gt;&#125;</span></span><br><span class="line">    scopedSlots: &#123;</span><br><span class="line">        <span class="keyword">default</span>: <span class="function"><span class="params">props</span> =&gt;</span> h(<span class="string">'span'</span>, props.text)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 具名slot</span></span><br><span class="line">    slot: <span class="string">'name-of-slot'</span>,</span><br><span class="line">    <span class="comment">// 其他特殊顶层属性</span></span><br><span class="line">    key: <span class="string">'myKey'</span>,</span><br><span class="line">    ref: <span class="string">'myRef'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><p>所有的组件树中，如果 VNode 是 <strong>组件</strong> 或 <strong>含有组件的 slot</strong>，那么 <strong>VNode 必须唯一</strong>。<br>&emsp;&emsp;重复渲染多个组件的方法如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 重复渲染多个组件 */</span></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;ele&gt;<span class="xml"><span class="tag">&lt;/<span class="name">ele</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 局部声明组件</span></span><br><span class="line"><span class="regexp">var Child = &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        return createElement('p', 'text');</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp">Vue.component('ele', &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        return createElement('div', </span></span><br><span class="line"><span class="regexp">            Array.apply(null, &#123;</span></span><br><span class="line"><span class="regexp">                length: 5</span></span><br><span class="line"><span class="regexp">            &#125;).map(function() &#123;</span></span><br><span class="line"><span class="regexp">                return createElement(Child);</span></span><br><span class="line"><span class="regexp">            &#125;)</span></span><br><span class="line"><span class="regexp">        );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">var app = new Vue(&#123;</span></span><br><span class="line"><span class="regexp">    el: '#app'</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure></p>
<p>对于含有组件的 slot，复用时 需要将 slot 的每个子节点都克隆一份（深度克隆）：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 复用含有组件的slot，需要将slot的每个子节点都clone一份 */</span></span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;ele&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;Child&gt;<span class="xml"><span class="tag">&lt;/<span class="name">Child</span>&gt;</span></span></span><br><span class="line">        &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>ele&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ 全局注册组件</span></span><br><span class="line"><span class="regexp">Vue.component('Child', &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        return createElement('p', 'text');</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">Vue.component('ele', &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ 克隆 slot 节点的方法</span></span><br><span class="line"><span class="regexp">        function cloneVNode(vnode) &#123;</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ 递归遍历所有子节点，并克隆(工厂函数)</span></span><br><span class="line"><span class="regexp">            const clonedChildren = vnode.children &amp;&amp; </span></span><br><span class="line"><span class="regexp">            vnode.children.map(function(v) &#123;</span></span><br><span class="line"><span class="regexp">                return cloneVNode(v);</span></span><br><span class="line"><span class="regexp">            &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            const cloned = createElement(</span></span><br><span class="line"><span class="regexp">                vnode.tag,</span></span><br><span class="line"><span class="regexp">                vnode.data,</span></span><br><span class="line"><span class="regexp">                clonedChildren</span></span><br><span class="line"><span class="regexp">            );</span></span><br><span class="line"><span class="regexp">            /</span><span class="regexp">/ VNode 关键属性</span></span><br><span class="line"><span class="regexp">            cloned.text = vnode.text;</span></span><br><span class="line"><span class="regexp">            cloned.isComment = vnode.isComment;</span></span><br><span class="line"><span class="regexp">            cloned.componentOptions = vnode.componentOptions;</span></span><br><span class="line"><span class="regexp">            cloned.elm = vnode.elm;</span></span><br><span class="line"><span class="regexp">            cloned.context = vnode.context;</span></span><br><span class="line"><span class="regexp">            cloned.ns = vnode.ns;</span></span><br><span class="line"><span class="regexp">            cloned.isStatic = vnode.isStatic;</span></span><br><span class="line"><span class="regexp">            cloned.key = vnode.key;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            return cloned;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        const vNodes = this.$slots.default;</span></span><br><span class="line"><span class="regexp">        const clonedVNodes = vNodes.map(function(vnode) &#123;</span></span><br><span class="line"><span class="regexp">            return cloneVNode(vnode);</span></span><br><span class="line"><span class="regexp">        &#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">        return createElement('div', [</span></span><br><span class="line"><span class="regexp">            vNodes,</span></span><br><span class="line"><span class="regexp">            clonedVNodes</span></span><br><span class="line"><span class="regexp">        ]);</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">var app = new Vue(&#123;</span></span><br><span class="line"><span class="regexp">    el: '#app'</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="使用-JavaScript-代替模板功能"><a href="#使用-JavaScript-代替模板功能" class="headerlink" title="使用 JavaScript 代替模板功能"></a>使用 JavaScript 代替模板功能</h3><p>在 Render 函数中，<strong>不能使用 Vue 内置的指令</strong>，无论要实现什么功能，都可以用原生 JavaScript。<br>例如，使用 JS 的for 循环来实现 v-for 如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* JS 实现 v-for */</span></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;ele :list=<span class="string">"list"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">ele</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">Vue.component('ele', &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        var nodes = [];</span></span><br><span class="line"><span class="regexp">        for(var i = 0; i &lt; this.list.length; i++) &#123;</span></span><br><span class="line"><span class="regexp">            nodes.push(createElement('p', this.list[i]));</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        return createElement('div', nodes);</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    props: &#123;</span></span><br><span class="line"><span class="regexp">        list: &#123;</span></span><br><span class="line"><span class="regexp">            type: Array</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">var app = new Vue(&#123;</span></span><br><span class="line"><span class="regexp">    el: '#app',</span></span><br><span class="line"><span class="regexp">    data: &#123;</span></span><br><span class="line"><span class="regexp">        list: [</span></span><br><span class="line"><span class="regexp">            '《Vue.js 实战》',</span></span><br><span class="line"><span class="regexp">            '《JavaScript 高级程序设计》',</span></span><br><span class="line"><span class="regexp">            '《JavaScript 语言精粹》'</span></span><br><span class="line"><span class="regexp">        ]</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure></p>
<p>Render 函数里也没有与 <strong>v-model</strong> 对应的API；对于 <strong>事件修饰符</strong> 和 <strong>按键修饰符</strong>，基本也需要自己实现。下面给出一个简单的发送聊天内容的场景模拟：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 聊天发送内容的简单模拟 */</span></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;ele&gt;<span class="xml"><span class="tag">&lt;/<span class="name">ele</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">Vue.component('ele', &#123;</span></span><br><span class="line"><span class="regexp">    render: function(createElement) &#123;</span></span><br><span class="line"><span class="regexp">        var _this = this;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ 渲染聊天内容列表</span></span><br><span class="line"><span class="regexp">        if (this.list.length) &#123;</span></span><br><span class="line"><span class="regexp">            var listNode = createElement('ul', this.list.map(function(item) &#123;</span></span><br><span class="line"><span class="regexp">                return createElement('li', item);</span></span><br><span class="line"><span class="regexp">            &#125;));</span></span><br><span class="line"><span class="regexp">        &#125; else &#123;</span></span><br><span class="line"><span class="regexp">            var listNode = createElement('p', '暂无聊天内容');</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ </span></span><br><span class="line"><span class="regexp">        return createElement('div', [</span></span><br><span class="line"><span class="regexp">            listNode,</span></span><br><span class="line"><span class="regexp">            createElement('input', &#123;</span></span><br><span class="line"><span class="regexp">                attrs: &#123;</span></span><br><span class="line"><span class="regexp">                    placeholder: '输入内容，按回车键发送'</span></span><br><span class="line"><span class="regexp">                &#125;,</span></span><br><span class="line"><span class="regexp">                style: &#123;</span></span><br><span class="line"><span class="regexp">                    width: '200px'</span></span><br><span class="line"><span class="regexp">                &#125;,</span></span><br><span class="line"><span class="regexp">                on: &#123;</span></span><br><span class="line"><span class="regexp">                    keyup: function(evt) &#123;</span></span><br><span class="line"><span class="regexp">                        // 如果不是回车键，不发送数据</span></span><br><span class="line"><span class="regexp">                        if (evt.keyCode !== 13) return;</span></span><br><span class="line"><span class="regexp">                        // 添加输入的内容到聊天列表</span></span><br><span class="line"><span class="regexp">                        _this.list.push(evt.target.value);</span></span><br><span class="line"><span class="regexp">                        // 发送后，清空输入框</span></span><br><span class="line"><span class="regexp">                        evt.target.value = '';</span></span><br><span class="line"><span class="regexp">                    &#125;</span></span><br><span class="line"><span class="regexp">                &#125;</span></span><br><span class="line"><span class="regexp">            &#125;)</span></span><br><span class="line"><span class="regexp">        ]);</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    data: function() &#123;</span></span><br><span class="line"><span class="regexp">        return &#123;</span></span><br><span class="line"><span class="regexp">            value: '',</span></span><br><span class="line"><span class="regexp">            list: []</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">var app = new Vue(&#123;</span></span><br><span class="line"><span class="regexp">    el: '#app'</span></span><br><span class="line"><span class="regexp">&#125;);</span></span><br><span class="line"><span class="regexp">&lt;/</span>script&gt;</span><br></pre></td></tr></table></figure></p>
<p><br><br><br><br><br></p>
<h2 id="函数化组件"><a href="#函数化组件" class="headerlink" title="函数化组件"></a>函数化组件</h2><p>将 <strong>functional 布尔值选项</strong>设置为 true，可以使组件 <strong>无状态</strong> 和 <strong>无实例</strong>，即 没有 data 和 this上下文。这样用 render 函数返回虚拟节点可以更容易渲染。<br>&emsp;&emsp;使用函数化组件时，Render 函数通过第二个参数 context 来提供 <strong>临时上下文</strong>。组件需要的 <strong>data、props、slots、children、parent</strong> 都是通过这个上下文来传递的。比如， <code>this.level</code> 要改写为 <code>context.props.level</code>， <code>this.$slots.default</code>改写为 <code>context.children</code> 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 用函数化组件 展示一个 根据数据 智能选择不同组件 的场景 */</span></span><br><span class="line"></span><br><span class="line">&lt;div id=<span class="string">"app"</span>&gt;</span><br><span class="line">    &lt;smart-item :data=<span class="string">"data"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">smart-item</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"change('img')"</span>&gt;</span>切换为图片组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"change('video')"</span>&gt;</span>切换为视频组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"change('text')"</span>&gt;</span>切换为文本组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="comment">// 图片组件选项</span></span><br><span class="line"><span class="keyword">var</span> ImgItem = &#123;</span><br><span class="line">    props: [<span class="string">'data'</span>],</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params">createElement</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> createElement(<span class="string">'div'</span>, [</span><br><span class="line">            createElement(<span class="string">'p'</span>, <span class="string">'图片组件'</span>),</span><br><span class="line">            createElement(<span class="string">'img'</span>, &#123;</span><br><span class="line">                attrs: &#123;</span><br><span class="line">                    src: <span class="keyword">this</span>.data.url</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 视频组件选项</span></span><br><span class="line"><span class="keyword">var</span> VideoItem = &#123;</span><br><span class="line">    props: [<span class="string">'data'</span>],</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params">createElement</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> createElement(<span class="string">'div'</span>, [</span><br><span class="line">            createElement(<span class="string">'p'</span>, <span class="string">'视频组件'</span>),</span><br><span class="line">            createElement(<span class="string">'video'</span>, &#123;</span><br><span class="line">                attrs: &#123;</span><br><span class="line">                    src: <span class="keyword">this</span>.data.url,</span><br><span class="line">                    controls: <span class="string">'controls'</span>,</span><br><span class="line">                    autoplay: <span class="string">'autoplay'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;),</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 纯文本组件选项</span></span><br><span class="line"><span class="keyword">var</span> TextItem = &#123;</span><br><span class="line">    props: [<span class="string">'data'</span>],</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params">createElement</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> createElement(<span class="string">'div'</span>, [</span><br><span class="line">            createElement(<span class="string">'p'</span>, <span class="string">'纯文本组件'</span>),</span><br><span class="line">            createElement(<span class="string">'p'</span>, <span class="keyword">this</span>.data.text),</span><br><span class="line">        ])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 自定义 smart-item 组件</span></span><br><span class="line">Vue.component(<span class="string">'smart-item'</span>, &#123;</span><br><span class="line">    <span class="comment">// 函数化组件</span></span><br><span class="line">    functional: <span class="literal">true</span>,</span><br><span class="line">    render: <span class="function"><span class="keyword">function</span>(<span class="params">createElement, context</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 根据传入的数据，智能判断显示哪种组件</span></span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">getComponent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> data = context.props.data;</span><br><span class="line">            <span class="comment">// 判断 prop: data 的 type 字段是属于哪种类型的组件</span></span><br><span class="line">            <span class="keyword">if</span> (data.type === <span class="string">'img'</span>) <span class="keyword">return</span> ImgItem;</span><br><span class="line">            <span class="keyword">if</span> (data.type === <span class="string">'video'</span>) <span class="keyword">return</span> VideoItem;</span><br><span class="line">            <span class="keyword">return</span> TextItem;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> createElement(</span><br><span class="line">            getComponent(),</span><br><span class="line">            &#123;</span><br><span class="line">                props: &#123;</span><br><span class="line">                    <span class="comment">// 把 smart-item 的 prop: data 传给上面智能选择的组件</span></span><br><span class="line">                    data: context.props.data</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            context.children</span><br><span class="line">        )</span><br><span class="line">    &#125;,</span><br><span class="line">    props: &#123;</span><br><span class="line">        data: &#123;</span><br><span class="line">            type: <span class="built_in">Object</span>,</span><br><span class="line">            required: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> app = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        data: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// 切换不同类型组件的数据</span></span><br><span class="line">        change: <span class="function"><span class="keyword">function</span>(<span class="params">type</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (type === <span class="string">'img'</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.data = &#123;</span><br><span class="line">                    type: <span class="string">'img'</span>,</span><br><span class="line">                    url: <span class="string">'https://raw.githubusercontent.com/iview/iview/master/assets/logo.png'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'video'</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.data = &#123;</span><br><span class="line">                    type: <span class="string">'video'</span>,</span><br><span class="line">                    url: <span class="string">'http://vjs/zencdn.net/v/oceans.mp4'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (type === <span class="string">'text'</span>) &#123;</span><br><span class="line">                <span class="keyword">this</span>.data = &#123;</span><br><span class="line">                    type: <span class="string">'text'</span>,</span><br><span class="line">                    content: <span class="string">'这是一段纯文本'</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 初始化时，默认设置 图片组件 的数据</span></span><br><span class="line">        <span class="keyword">this</span>.change(<span class="string">'img'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
<p>上述代码中，smart-item 和 3个功能组件 都有 <code>prop: data</code>，这里通过 <code>createElement</code> 函数把 <code>getComponent()</code> 返回的对象设置为第一个参数，通过第二个参数 <code>context</code> 把 <code>smart-item</code> 的<code>data</code> 传递到选择的组件里的 <code>prop: data</code>，组件渲染出不同的内容。</p>
<p>总的来说，函数化组件 主要适用于以下两个场景：</p>
<ul>
<li>程序化地在多个组件中选择一个.</li>
<li>在将 children，props，data 传递给子组件之前 操作它们.</li>
</ul>
<p><br><br><br><br><br></p>
<h2 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h2><p>使用 Render 函数最不友好的地方在于，当子节点嵌套较多时，使用 createElement 难以书写及阅读出 DOM结构。<br>&emsp;&emsp;<strong>JSX</strong> 是一种看起来像 HTML，但实际是 <strong>JavaScript 的语法扩展</strong>，它用更接近 DOM 结构的形式 来描述一个组件的 UI 和状态信息。Vue.js 提供了插件 <code>babel-plugin-transform-vue-jsx</code> 来支持 JSX 语法。</p>
<p><br><br><br><br><br></p>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/jiafengfu">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
