<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="符佳凤的博客">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        初识区块链 - FU的博客 | FU&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
<link rel="alternate" href="/atom.xml" title="FU's Blog" type="application/atom+xml">
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> Fashion passes ,   style remains. </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>Jiafeng Fu</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>HOME</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>TAGS</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>ARCHIVES</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>ABOUT</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>SEARCH</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#WHAT-什么是区块链"><span class="toc-text">WHAT - 什么是区块链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#区块"><span class="toc-text">区块</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#区块组成"><span class="toc-text">区块组成</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#哈希的用处"><span class="toc-text">哈希的用处</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#比特币挖矿"><span class="toc-text">比特币挖矿</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#非对称加密"><span class="toc-text">非对称加密</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链"><span class="toc-text">区块链</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#区块的扩容"><span class="toc-text">区块的扩容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#区块链分叉"><span class="toc-text">区块链分叉</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#硬分叉"><span class="toc-text">硬分叉</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#软分叉"><span class="toc-text">软分叉</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WHY-为什么使用区块链"><span class="toc-text">WHY - 为什么使用区块链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#HOW-怎么使用区块链"><span class="toc-text">HOW - 怎么使用区块链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#模型架构"><span class="toc-text">模型架构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本类型"><span class="toc-text">基本类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#发展脉络"><span class="toc-text">发展脉络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#共识机制"><span class="toc-text">共识机制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#智能合约（Smart-Contract）"><span class="toc-text">智能合约（Smart Contract）</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">search</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> Fashion passes ,   style remains. </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        初识区块链
    </div>

    <div class="post-meta">
        <span class="attr">Post：<span>2020-03-02 22:04:40</span></span>
        
        <span class="attr">Tags：/
        
        <a class="tag" href="/tags/#区块链" title="区块链">区块链</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">Visit：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <blockquote>
<p>钥，多音字，在密码学中读音为 <strong>yào</strong>，即发音应为 密钥（yào）、公钥（yào）、私钥（yào）。</p>
</blockquote>
<h2 id="WHAT-什么是区块链"><a href="#WHAT-什么是区块链" class="headerlink" title="WHAT - 什么是区块链"></a>WHAT - 什么是区块链</h2><h3 id="区块"><a href="#区块" class="headerlink" title="区块"></a>区块</h3><p><strong>区块</strong> 指信息块，比特币系统 <strong>大约每10分钟</strong> 就会创建一个区块（随算力的提升，会调整 hash值的难度系数，使区块创建时间维持在10分钟），其中包含了 <strong>这段时间里</strong> <strong>全网范围内</strong> 所发生的 <strong>所有交易</strong>。</p>
<p><strong>区块三要素</strong>： 本区块的 ID（哈希值）、若干交易单、前一区块的 ID。</p>
<blockquote>
<p><strong>创世区块</strong> 是由 中本聪 创建的 第一个区块。</p>
</blockquote>
<h4 id="区块组成"><a href="#区块组成" class="headerlink" title="区块组成"></a>区块组成</h4><p>一个区块由以下两部分组成：</p>
<ul>
<li><strong>区块头</strong>：包含 <u>区块的特征信息</u>；</li>
<li><strong>区块体</strong>：包含 比特币交易信息。</li>
</ul>
<p>其中，区块的特征信息 包括：</p>
<ul>
<li><strong>父区块（上一个区块）的哈希值</strong></li>
<li><strong>当前区块的哈希值</strong></li>
<li><strong>挖矿难度、Nonce随机数、时间戳</strong></li>
<li><strong>Merkle树根</strong></li>
</ul>
<h4 id="哈希的用处"><a href="#哈希的用处" class="headerlink" title="哈希的用处"></a>哈希的用处</h4><p><strong>哈希算法</strong>：哈希算法将任意长度的二进制值 映射为 <strong>固定长度</strong> 的较小二进制值（即哈希值）。</p>
<p>区块链的哈希算法是 <strong>SHA-256（安全散列算法）</strong>， 输入的明文与输出的散列数据一一对应；区块链的 <strong>哈希长度是 256位</strong>。</p>
<p>区块哈希的计算公式 如下：<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">Hash</span> = SHA256( 区块头 )</span><br></pre></td></tr></table></figure></p>
<ul>
<li>区块的 <strong>Hash值</strong> 是根据 <strong>区块头</strong> 计算的；</li>
<li>每个区块的哈希值都是不一样的，哈希值可以 <strong>唯一标识区块</strong>；</li>
<li><strong>区块与哈希值 一一对应</strong>，如果区块的内容改变，则其哈希值一定会改变；</li>
<li>除非掌握了全网 <strong>51%以上</strong> 的计算力，否则短时间内修改多个区块几乎不可能发生（不可篡改）。</li>
</ul>
<h4 id="比特币挖矿"><a href="#比特币挖矿" class="headerlink" title="比特币挖矿"></a>比特币挖矿</h4><p>我们将一段时间（大约10min）内发生的所有有效交易打包 并计算哈希值的过程，叫做 <strong>比特币挖矿</strong>。计算哈希值需要大量的计算，谁先计算出有效哈希，就立即广播全网，并将该区块添加至区块链，享受这个区块的全部收益（区块链奖励 + 交易提成），其他矿工将放弃此次计算。</p>
<p>新生成的区块必须添加在区块链中最后一个区块的后边。为了保持所有节点的一致，每当有新区块加入，所有节点都必须立即同步信息，所以 新区块的添加速度不能太快。</p>
<p>为了控制区块添加速度，中本聪 的设计思路是 矿工必须找到 <strong>满足特定要求</strong> 的 SHA-256 哈希值，才能创建出一个新的区块。</p>
<p><strong>哈希值要求</strong>：</p>
<ul>
<li>包括前一个区块头的哈希值</li>
<li>小于或等于 <strong>目标数</strong></li>
<li>包括一个称为 <strong>随机数Nonce</strong> 的数字</li>
<li>包括所有交易的 <strong>merkle树根</strong></li>
</ul>
<blockquote>
<p><strong>目标数</strong>：区块链协议规定，使用一个常量除以难度系数，可以得到目标数（target），难度系数越大，目标数就越小。不管有多少计算能力或旷工，都可以通过 <strong>动态调整难度系数</strong>，来保持 <strong>每10分钟</strong> 创造一个区块。<br><strong>Nonce数</strong>：32位的二进制数，是用于工作量证明 PoW 的计数器。当前区块的哈希由区块头唯一决定。如果要对同一个区块反复计算哈希，就意味着，区块头必须不停地变化，否则不可能算出不一样的哈希。区块头里面所有的特征值都是固定的，为了让区块头产生变化，中本聪故意增加了一个随机项，叫做 Nonce。（旷工的任务就是去猜这个 Nounce）。<br><strong>Merkle 树根数据</strong>：它能够总结区块中的所有交易，并快速归纳和校验大规模数据的完整性。</p>
</blockquote>
<h4 id="非对称加密"><a href="#非对称加密" class="headerlink" title="非对称加密"></a>非对称加密</h4><p>区块中的数据就是一笔笔的 <strong>比特币交易</strong>。要进行比特币交易，就需要拥有自己的公钥和私钥（当开通比特币账户时，会生成一个比特币钱包，用来存放账户的公钥和私钥）。</p>
<p><strong>- 公钥和私钥</strong></p>
<p>在比特币系统中，私钥本质上是由 <strong>32个字节</strong> 组成的数组；公钥的长度是 <strong>512位（64字节）</strong>，不方便传播，因此规定要为公钥生成一个 <strong>160位</strong> 的易于传播的 哈希值（转换为十六进制，大约是 26~35 个字符）。</p>
<p>公钥是公开的，任何人都可以获取；私钥是保密的，只有拥有者才能使用。</p>
<blockquote>
<p>公钥和地址的生成 都依赖私钥。</p>
</blockquote>
<p><strong>- 比特币交易</strong></p>
<p>比特币交易，实质上就是 <strong>一个地址的比特币 转移到另一个地址</strong>。每个地址拥有多少比特币， 公开可查，因此可以轻易验证这笔交易是否有效。同时，为了防止有人冒名申报交易，在进行交易时，支付方需要提供以下数据：</p>
<ul>
<li>交易金额</li>
<li>上一笔交易的 Hash（可溯源）</li>
<li>本次交易的双方地址</li>
<li>支付方公钥</li>
<li>支付方私钥生成的数字签名</li>
</ul>
<p>申报交易后，这条交易信息被广播至各个节点。其他节点 <strong>验证这笔交易是否属实</strong>，需要三步：</p>
<ol>
<li>根据哈希值 找到上一笔交易，确认支付方 比特币的来源；</li>
<li>根据支付方公钥 计算对应的哈希值，确认与提供的支付方地址一致，从而保证公钥属实；</li>
<li>使用支付方公钥 解开支付方的数字签名，确认私钥属实。</li>
</ol>
<p>确认交易属实后，交易数据 就会被送至矿工那里，由矿工负责将交易写入区块链（矿工将一批交易信息打包 并计算有效哈希值，即我们所说的 挖矿）。交易一旦写入区块链即无法更改。</p>
<h3 id="区块链"><a href="#区块链" class="headerlink" title="区块链"></a>区块链</h3><p><strong>区块链</strong> 实质上是一系列 使用密码学而产生的互相关联的数据块，每一个数据块中包含了多条 经比特币的网络交易有效确认的信息。本质上，我们可以将区块链看做一个 <strong>去中心化的 分布式账本 / 分布式数据库</strong>。</p>
<p>任何人都可以通过 架设服务器 加入区块链，并成为一个节点。区块链中的每个节点都是 <strong>平等的</strong>，都保存着区块链中的所有数据。当区块链中加入新区块时，所有节点将同步信息，保持区块链数据的一致性。</p>
<h3 id="区块的扩容"><a href="#区块的扩容" class="headerlink" title="区块的扩容"></a>区块的扩容</h3><blockquote>
<p>中本聪在创建区块链时，将一个区块的容量设置 <strong>1M</strong>（=1024KB =1048576 B），一笔比特币交易的大小为 <strong>250B ~ 500B</strong>。若交易大小按 250B 计算，则一个区块可包含的交易数为： 1048576 B / 250 B = 4194.3 笔交易；而一个区块的确认时间：<strong>10min</strong> （= 600s），则一个区块 <strong>每秒可处理交易数</strong>为： 4194.3 / 600 = <strong>7 个</strong>。</p>
<p> 若交易数据 <strong>&gt;250B</strong>，则一个区块每秒可处理交易数更少（ <strong>&lt;7个</strong> ）</p>
</blockquote>
<p>为了提高比特币交易效率，许多 <u>区块的扩容方案</u> 产生了，而由于扩容方案的不一致，就导致了区块链的分叉问题。</p>
<h3 id="区块链分叉"><a href="#区块链分叉" class="headerlink" title="区块链分叉"></a>区块链分叉</h3><p>当两个节点 <strong>同时</strong> 向区块链末端A后<strong>添加区块</strong>时，会形成分叉。这时，最先生成 6 个新区块的分支会成为有效的主链，这称为“<strong>六次确认</strong>”。</p>
<h4 id="硬分叉"><a href="#硬分叉" class="headerlink" title="硬分叉"></a>硬分叉</h4><p>定义：比特币的 <u>区块格式 / 交易格式</u> 发生改变时，未升级的节点 <strong>拒绝验证</strong> 已升级的节点产生的区块，而已升级的节点 可以验证 未升级的节点产生的区块，而后大家各自延续自己认为正确的链，所以分成两条链。</p>
<p>特点：</p>
<ul>
<li>硬分叉是 <strong>永久的</strong>；</li>
<li>没有 向前兼容性（需强制升级）；</li>
<li>在区块链层面 有分叉的两条链，<strong>一条旧链，一条新链</strong>；</li>
<li>需在某个时间点 全部同意分叉升级，不同意的将会进入旧链。</li>
</ul>
<h4 id="软分叉"><a href="#软分叉" class="headerlink" title="软分叉"></a>软分叉</h4><p>定义：比特币交易的数据结构发生改变时，未升级的节点 <strong>可以验证</strong> 已经升级的节点产生的区块，且已升级的节点也可以验证未升级的节点产生的区块。</p>
<p>特点：</p>
<ul>
<li>软分叉是 <strong>暂时的</strong>；</li>
<li>兼容性好，可不升级；</li>
<li>在区块链层面没有分叉的链，只是组成链的区块有新区块和旧区块之分；</li>
<li>相当长时间内，可暂不升级，<strong>新旧区块可并存</strong>。</li>
</ul>
<h2 id="WHY-为什么使用区块链"><a href="#WHY-为什么使用区块链" class="headerlink" title="WHY - 为什么使用区块链"></a>WHY - 为什么使用区块链</h2><ul>
<li><strong>去中心化</strong>（分布式的 P2P网络，每个节点都具有 读/写权限）</li>
<li><strong>去信任</strong>（不需要具有公信力的政府或第三方机构，信任的是数学算法）</li>
<li><strong>可靠的数据库</strong>（不可篡改）</li>
<li><strong>可追溯</strong>（时间戳 + hash值 记录了每个区块的一生）</li>
<li><strong>集体维护</strong>（区块链 由所有节点共同维护）</li>
</ul>
<h2 id="HOW-怎么使用区块链"><a href="#HOW-怎么使用区块链" class="headerlink" title="HOW - 怎么使用区块链"></a>HOW - 怎么使用区块链</h2><h3 id="模型架构"><a href="#模型架构" class="headerlink" title="模型架构"></a>模型架构</h3><ol>
<li><strong>数据层</strong></li>
<li><strong>网络层</strong>：P2P网络（去中心化，节点间直接交易）</li>
<li><strong>共识层</strong>：通过共识机制，确认区块有效并加入区块链</li>
<li><strong>激励层</strong>：发行机制、分配机制（鼓励旷工挖矿）</li>
<li><strong>合约层</strong>：脚本代码、算法机制、智能合约</li>
<li><strong>应用层</strong>：区块链 +</li>
</ol>
<h3 id="基本类型"><a href="#基本类型" class="headerlink" title="基本类型"></a>基本类型</h3><p>常见类型：</p>
<ul>
<li><strong>公有链</strong>：全世界任何人都可读取、任何人都能在其中发送交易 且交易能够获得有效确认、任何人都能参与共识过程 的区块链（比特币、以太币 使用的就是公有链）；</li>
<li><strong>私有链</strong>：写入权限仅在 一个组织 手中的区块链（没有去中心化）；</li>
<li><strong>联盟链</strong>：指共识过程受到 <strong>预选节点</strong> 控制的区块链，即若干机构共同参与管理区块链，每个机构运行着一个或多个节点（部分去中心化），超过 2/3 的机构确认即可使区块生效（<strong>2/3确认</strong>，可控性较强）（比如，R3联盟）。</li>
</ul>
<h3 id="发展脉络"><a href="#发展脉络" class="headerlink" title="发展脉络"></a>发展脉络</h3><ol>
<li>区块链 1.0 - <strong>可编程货币</strong>（比特币）</li>
<li>区块链 2.0 - <strong>可编程金融</strong>（智能合约）</li>
<li>区块链 3.0 - <strong>可编程社会</strong>（DAPP）</li>
</ol>
<h3 id="共识机制"><a href="#共识机制" class="headerlink" title="共识机制"></a>共识机制</h3><p><strong>共识过程</strong> 决定哪个区块可被添加到区块链中，也能让参与者明确当前状态。</p>
<p>共识机制如下：</p>
<ul>
<li><strong>工作量证明 PoW</strong></li>
<li><strong>权益证明 PoS</strong></li>
<li><strong>股份授权证明 DPoS</strong></li>
<li>投注共识</li>
<li>瑞波共识机制</li>
<li>Pool 验证池</li>
<li>实用拜占庭容错</li>
<li>授权拜占庭容错</li>
<li>帕克索斯算法</li>
</ul>
<h3 id="智能合约（Smart-Contract）"><a href="#智能合约（Smart-Contract）" class="headerlink" title="智能合约（Smart Contract）"></a>智能合约（Smart Contract）</h3><p>智能合约 是 以太坊（Ethereum） 网络上的一种特殊账户，其中包含：</p>
<ul>
<li><strong>以太坊地址</strong>（账户的唯一标识符）</li>
<li><strong>以太币余额</strong>（这意味着代码可以 拥有、管理资金；若代码有误，则资金会被错误处理）</li>
<li><strong>状态</strong>（即 智能合约中声明的所有变量 和 变量的当前状态）</li>
<li><strong>代码</strong>（指 编译后可在 <u>以太坊客户端和节点</u> 运行的<strong>字节码</strong>）</li>
</ul>
<p>智能合约通过可编程特性，使得达到触发条件时，可以自动触发执行合约。</p>
<blockquote>
<p>有趣的是，智能合约 还可以调用其他智能合约， 这使得 自动化代理 的实现成为可能，可为各种行业提供去中心化的解决方案。</p>
</blockquote>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        
        <li>
            <a target="_blank"  href="https://github.com/jiafengfu">
                            <span class="fa-stack fa-lg">
                                <i class="iconfont icon-github"></i>
                            </span>
            </a>
        </li>
        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
